import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.Hashtable;

import javax.swing.JPanel;

public class Graph extends JPanel{
	
    /**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	
	private LinkedList<String> names;
    private Hashtable<String, Vertex> cities;
//    private LinkedList<Edge> edges;
//
//    private BinaryHeap<Edge> heap;
    private double totalDistance;
	
	public Graph(LinkedList<String> pairs, LinkedList<Double> distances,
			LinkedList<String> cityNames, LinkedList<Integer> xy){
		
		names = cityNames;
		cities = new Hashtable<String, Vertex>();
		
		Iterator<String> namesIterator = names.iterator();
		Iterator<Integer> xyIterator = xy.iterator();

		while (namesIterator.hasNext()){
			String cityName = namesIterator.next();
			Vertex city = new Vertex(cityName, xyIterator.next(), xyIterator.next());
			cities.put(cityName, city);
		}
		
		edges = new LinkedList<Edge>();
		
		Iterator<String> pairsIterator = pairs.iterator();
		Iterator<Double> distancesIterator = distances.iterator();
		while (pairsIterator.hasNext()){
			Vertex v1 = cities.get(pairsIterator.next());
			Vertex v2 = cities.get(pairsIterator.next());
			Double distance = distancesIterator.next();
			Edge e1 = new Edge(v1, v2, distance);
			Edge e2 = new Edge(v2, v1, distance);
			v1.addEdge(e1);
			v2.addEdge(e2);
			totalDistance += distance;
		}
	}
	
	public void paintComponent(Graphics g) {
		Graphics2D g2 = (Graphics2D) g;
		Iterator<String> namesIterator = names.iterator();
		
		while (namesIterator.hasNext()){
			Vertex vertex = cities.get(namesIterator.next());
			String label = vertex.name;
			int x = vertex.x;
			int y = vertex.y;
			
			LinkedList<Edge> adjacentCities = vertex.adjacencyList;
			Iterator<Edge> adjIterator = adjacentCities.iterator();
			
			while (adjIterator.hasNext()) {
				Edge e = adjIterator.next();
				g2.drawLine(e.x1, e.y1, e.x2, e.y2);
			}
			
            g2.drawString(label, x + 15, y + 10);
            g2.drawOval(x, y, 10, 10);
            g2.setColor(Color.CYAN);
            g2.fillOval(x, y, 10, 10);
            g2.setColor(Color.BLACK);	
		}

	}

}
